(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

// NAMESPACE
var smash = {};

// CREATE & ACCESS CANVAS
smash.canvas = document.getElementById('canvas');
smash.context = smash.canvas.getContext('2d');

// SET & RESET DEFAULT GAME STATE
smash.x = undefined;
smash.y = undefined;

smash.dx = undefined;
smash.dy = undefined;

smash.paddleX = undefined;

smash.leftKey = false;
smash.rightKey = false;

smash.default = function () {
  smash.x = smash.canvas.width / 2;
  smash.y = smash.canvas.height - 30;
  smash.dx = 2;
  smash.dy = -2;
  smash.paddleX = (smash.canvas.width - smash.paddleWidth) / 2;
};

// CREATE BALL
smash.ballRadius = 10;

smash.drawBall = function () {
  smash.context.beginPath();
  smash.context.arc(smash.x, smash.y, smash.ballRadius, 0, Math.PI * 2);
  smash.context.fillStyle = 'white';
  smash.context.fill();
  smash.context.closePath();
};

// CREATE PADDLE
smash.paddleHeight = 10;
smash.paddleWidth = 75;

smash.drawPaddle = function () {
  smash.context.beginPath();
  smash.context.rect(smash.paddleX, smash.canvas.height - smash.paddleHeight, smash.paddleWidth, smash.paddleHeight);
  smash.context.fillStyle = 'white';
  smash.context.fill();
  smash.context.closePath();
};

// BOUNCE OFF THE WALLS
smash.reverseX = function () {
  return smash.dx = -smash.dx;
};
smash.reverseY = function () {
  return smash.dy = -smash.dy;
};

smash.hitX = function () {
  return smash.x + smash.dx < smash.ballRadius || smash.x + smash.dx > smash.canvas.width - smash.ballRadius;
};

smash.hitTheRoof = function () {
  return smash.y + smash.dy < smash.ballRadius;
};
smash.hitTheFloor = function () {
  return smash.y + smash.dy > smash.canvas.height - smash.ballRadius;
};

smash.overPaddle = function () {
  return smash.x > smash.paddleX && smash.x < smash.paddleX + smash.paddleWidth;
};
smash.hitPaddle = function () {
  return smash.overPaddle() && smash.hitTheFloor();
};

// MOVE BACK AND FORTH
$(document).on('keydown', function (e) {
  if (e.keyCode === 37) {
    smash.leftKey = true;
    smash.playSound('hi-perc-5');
  } else if (e.keyCode === 39) {
    smash.rightKey = true;
    smash.playSound('hi-perc-7');
  };
});
$(document).on('keyup', function (e) {
  if (e.keyCode === 37) {
    smash.leftKey = false;
  } else if (e.keyCode === 39) {
    smash.rightKey = false;
  };
});

smash.marginLeft = function () {
  return smash.paddleX > 0;
};
smash.marginRight = function () {
  return smash.paddleX < smash.canvas.width - smash.paddleWidth;
};

smash.moveLeft = function () {
  return smash.paddleX -= 7;
};
smash.moveRight = function () {
  return smash.paddleX += 7;
};

// BRICK IT
smash.brickRows = 5;
smash.brickColumns = 3;
smash.brickWidth = 75;
smash.brickHeight = 20;
smash.brickPadding = 10;
smash.brickOffsetTop = 30;
smash.brickOffsetLeft = 30;

smash.bricks = [];

smash.brickLayer = function () {
  for (var col = 0; col < smash.brickColumns; col++) {
    for (var row = 0; row < smash.brickRows; row++) {
      smash.bricks.push({
        x: row * (smash.brickWidth + smash.brickPadding) + smash.brickOffsetLeft,
        y: col * (smash.brickHeight + smash.brickPadding) + smash.brickOffsetTop,
        status: 1
      });
    };
  };
};

smash.drawBricks = function () {
  smash.bricks.forEach(function (brick) {
    if (!brick.status) return;

    smash.context.beginPath();
    smash.context.rect(brick.x, brick.y, smash.brickWidth, smash.brickHeight);
    smash.context.fillStyle = 'white';
    smash.context.fill();
    smash.context.closePath();
  });
};

// SETTLE THE SCORE
smash.score = 0;

smash.drawScore = function () {
  smash.context.font = '16px monospace';
  smash.context.fillStyle = 'white';
  smash.context.fillText('score: ' + smash.score, 10, 20);
};

// YOLO
smash.lives = 3;

smash.drawLives = function () {
  smash.context.font = '16px monospace';
  smash.context.fillStyle = 'white';
  smash.context.fillText('lives: ' + smash.lives, smash.canvas.width - 90, 20);
};

// BREAK STUFF, WIN PRIZES
smash.crash = function () {
  smash.bricks.forEach(function (brick) {
    if (!brick.status) return;

    smash.brickExists = smash.x > brick.x && smash.x < brick.x + smash.brickWidth && smash.y > brick.y && smash.y < brick.y + smash.brickHeight;

    if (smash.brickExists) {
      smash.reverseY();
      smash.playSound('mid-perc-9');

      brick.status = 0;
      smash.score++;

      if (smash.score === smash.brickRows * smash.brickColumns) {
        smash.playSound('loop-3');
        $('#alert').text('WIN');

        setTimeout(function () {
          document.location.reload();
        }, 1000);
      };
    };
  });
};

smash.playSound = function (sound) {
  smash.sound = $('audio[id="' + sound + '"]');
  smash.sound[0].currentTime = 0;
  smash.sound[0].play();
};

// ACTION!
smash.draw = function () {

  // CLEAR CANVAS
  smash.context.clearRect(0, 0, smash.canvas.width, smash.canvas.height);

  // DRAW IT OUT
  smash.drawBricks();
  smash.drawBall();
  smash.drawPaddle();
  smash.drawLives();
  smash.drawScore();
  smash.crash();

  // WALLBALL
  if (smash.hitX()) {
    smash.reverseX();
    smash.playSound('hi-perc-2');
  };
  if (smash.hitPaddle()) {
    smash.reverseY();
    smash.playSound('kick-5');
  };
  if (smash.hitTheRoof()) {
    smash.reverseY();
    smash.playSound('hi-perc-2');
  } else if (smash.hitTheFloor()) {
    smash.playSound('mid-perc-8');
    smash.lives--;
    if (!smash.lives) {
      smash.lives = 'ðŸ’€';

      $('#alert').text('lose');

      setTimeout(function () {
        document.location.reload();
      }, 1000);
    } else {
      smash.default();
    };
  };

  // ELECTRIC SLIDE
  if (smash.leftKey && smash.marginLeft()) {
    smash.moveLeft();
  };
  if (smash.rightKey && smash.marginRight()) {
    smash.moveRight();
  };

  // POSITION += NEW POSITION
  smash.x += smash.dx;
  smash.y += smash.dy;

  requestAnimationFrame(smash.draw);
};

// INIT
smash.init = function () {
  smash.brickLayer();
  smash.default();
  smash.draw();
};

// DOCREADY
$(smash.init);

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJkZXYvc2NyaXB0cy9hcHAuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBO0FBQ0EsSUFBTSxRQUFRLEVBQWQ7O0FBRUE7QUFDQSxNQUFNLE1BQU4sR0FBZSxTQUFTLGNBQVQsQ0FBd0IsUUFBeEIsQ0FBZjtBQUNBLE1BQU0sT0FBTixHQUFnQixNQUFNLE1BQU4sQ0FBYSxVQUFiLENBQXdCLElBQXhCLENBQWhCOztBQUVBO0FBQ0EsTUFBTSxDQUFOLEdBQVUsU0FBVjtBQUNBLE1BQU0sQ0FBTixHQUFVLFNBQVY7O0FBRUEsTUFBTSxFQUFOLEdBQVcsU0FBWDtBQUNBLE1BQU0sRUFBTixHQUFXLFNBQVg7O0FBRUEsTUFBTSxPQUFOLEdBQWdCLFNBQWhCOztBQUVBLE1BQU0sT0FBTixHQUFnQixLQUFoQjtBQUNBLE1BQU0sUUFBTixHQUFpQixLQUFqQjs7QUFFQSxNQUFNLE9BQU4sR0FBZ0IsWUFBVztBQUN6QixRQUFNLENBQU4sR0FBVSxNQUFNLE1BQU4sQ0FBYSxLQUFiLEdBQXFCLENBQS9CO0FBQ0EsUUFBTSxDQUFOLEdBQVUsTUFBTSxNQUFOLENBQWEsTUFBYixHQUFzQixFQUFoQztBQUNBLFFBQU0sRUFBTixHQUFXLENBQVg7QUFDQSxRQUFNLEVBQU4sR0FBVyxDQUFDLENBQVo7QUFDQSxRQUFNLE9BQU4sR0FBZ0IsQ0FBQyxNQUFNLE1BQU4sQ0FBYSxLQUFiLEdBQXFCLE1BQU0sV0FBNUIsSUFBMkMsQ0FBM0Q7QUFDRCxDQU5EOztBQVFBO0FBQ0EsTUFBTSxVQUFOLEdBQW1CLEVBQW5COztBQUVBLE1BQU0sUUFBTixHQUFpQixZQUFXO0FBQzFCLFFBQU0sT0FBTixDQUFjLFNBQWQ7QUFDQSxRQUFNLE9BQU4sQ0FBYyxHQUFkLENBQWtCLE1BQU0sQ0FBeEIsRUFBMkIsTUFBTSxDQUFqQyxFQUFvQyxNQUFNLFVBQTFDLEVBQXNELENBQXRELEVBQXlELEtBQUss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QUNBLFVBQU0sU0FBTixDQUFnQixRQUFoQjtBQUNEO0FBQ0QsTUFBSSxNQUFNLFVBQU4sRUFBSixFQUF3QjtBQUN0QixVQUFNLFFBQU47QUFDQSxVQUFNLFNBQU4sQ0FBZ0IsV0FBaEI7QUFDRCxHQUhELE1BR08sSUFBSSxNQUFNLFdBQU4sRUFBSixFQUF5QjtBQUM5QixVQUFNLFNBQU4sQ0FBZ0IsWUFBaEI7QUFDQSxVQUFNLEtBQU47QUFDQSxRQUFJLENBQUMsTUFBTSxLQUFYLEVBQWtCO0FBQ2hCLFlBQU0sS0FBTixHQUFjLElBQWQ7O0FBRUEsUUFBRSxRQUFGLEVBQVksSUFBWixDQUFpQixNQUFqQjs7QUFFQSxpQkFBVyxZQUFXO0FBQ3BCLGlCQUFTLFFBQVQsQ0FBa0IsTUFBbEI7QUFDRCxPQUZELEVBRUcsSUFGSDtBQUdELEtBUkQsTUFRTztBQUNMLFlBQU0sT0FBTjtBQUNEO0FBQ0Y7O0FBRUQ7QUFDQSxNQUFJLE1BQU0sT0FBTixJQUFpQixNQUFNLFVBQU4sRUFBckIsRUFBeUM7QUFDdkMsVUFBTSxRQUFOO0FBQ0Q7QUFDRCxNQUFJLE1BQU0sUUFBTixJQUFrQixNQUFNLFdBQU4sRUFBdEIsRUFBMkM7QUFDekMsVUFBTSxTQUFOO0FBQ0Q7O0FBRUQ7QUFDQSxRQUFNLENBQU4sSUFBVyxNQUFNLEVBQWpCO0FBQ0EsUUFBTSxDQUFOLElBQVcsTUFBTSxFQUFqQjs7QUFFQSx3QkFBc0IsTUFBTSxJQUE1QjtBQUNELENBdEREOztBQXdEQTtBQUNBLE1BQU0sSUFBTixHQUFhLFlBQVc7QUFDdEIsUUFBTSxVQUFOO0FBQ0EsUUFBTSxPQUFOO0FBQ0EsUUFBTSxJQUFOO0FBQ0QsQ0FKRDs7QUFNQTtBQUNBLEVBQUUsTUFBTSxJQUFSIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8vIE5BTUVTUEFDRVxuY29uc3Qgc21hc2ggPSB7fTtcblxuLy8gQ1JFQVRFICYgQUNDRVNTIENBTlZBU1xuc21hc2guY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbnZhcycpO1xuc21hc2guY29udGV4dCA9IHNtYXNoLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXG4vLyBTRVQgJiBSRVNFVCBERUZBVUxUIEdBTUUgU1RBVEVcbnNtYXNoLnggPSB1bmRlZmluZWQ7XG5zbWFzaC55ID0gdW5kZWZpbmVkO1xuXG5zbWFzaC5keCA9IHVuZGVmaW5lZDtcbnNtYXNoLmR5ID0gdW5kZWZpbmVkO1xuXG5zbWFzaC5wYWRkbGVYID0gdW5kZWZpbmVkO1xuXG5zbWFzaC5sZWZ0S2V5ID0gZmFsc2U7XG5zbWFzaC5yaWdodEtleSA9IGZhbHNlO1xuXG5zbWFzaC5kZWZhdWx0ID0gZnVuY3Rpb24oKSB7XG4gIHNtYXNoLnggPSBzbWFzaC5jYW52YXMud2lkdGggLyAyO1xuICBzbWFzaC55ID0gc21hc2guY2FudmFzLmhlaWdodCAtIDMwO1xuICBzbWFzaC5keCA9IDI7XG4gIHNtYXNoLmR5ID0gLTI7XG4gIHNtYXNoLnBhZGRsZVggPSAoc21hc2guY2FudmFzLndpZHRoIC0gc21hc2gucGFkZGxlV2lkdGgpIC8gMjtcbn07XG5cbi8vIENSRUFURSBCQUxMXG5zbWFzaC5iYWxsUmFkaXVzID0gMTA7XG5cbnNtYXNoLmRyYXdCYWxsID0gZnVuY3Rpb24oKSB7XG4gIHNtYXNoLmNvbnRleHQuYmVnaW5QYXRoKCk7XG4gIHNtYXNoLmNvbnRleHQuYXJjKHNtYXNoLngsIHNtYXNoLnksIHNtYXNoLmJhbGxSYWRpdXMsIDAsIE1hdGguUEkgKiAyKTtcbiAgc21hc2guY29udGV4dC5maWxsU3R5bGUgPSAnd2hpdGUnO1xuICBzbWFzaC5jb250ZXh0LmZpbGwoKTtcbiAgc21hc2guY29udGV4dC5jbG9zZVBhdGgoKTtcbn07XG5cbi8vIENSRUFURSBQQURETEVcbnNtYXNoLnBhZGRsZUhlaWdodCA9IDEwO1xuc21hc2gucGFkZGxlV2lkdGggPSA3NTtcblxuc21hc2guZHJhd1BhZGRsZSA9IGZ1bmN0aW9uKCkge1xuICBzbWFzaC5jb250ZXh0LmJlZ2luUGF0aCgpO1xuICBzbWFzaC5jb250ZXh0LnJlY3Qoc21hc2gucGFkZGxlWCwgKHNtYXNoLmNhbnZhcy5oZWlnaHQgLSBzbWFzaC5wYWRkbGVIZWlnaHQpLCBzbWFzaC5wYWRkbGVXaWR0aCwgc21hc2gucGFkZGxlSGVpZ2h0KTtcbiAgc21hc2guY29udGV4dC5maWxsU3R5bGUgPSAnd2hpdGUnO1xuICBzbWFzaC5jb250ZXh0LmZpbGwoKTtcbiAgc21hc2guY29udGV4dC5jbG9zZVBhdGgoKTtcbn07XG5cbi8vIEJPVU5DRSBPRkYgVEhFIFdBTExTXG5zbWFzaC5yZXZlcnNlWCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gc21hc2guZHggPSAtc21hc2guZHg7XG59O1xuc21hc2gucmV2ZXJzZVkgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHNtYXNoLmR5ID0gLXNtYXNoLmR5O1xufTtcblxuc21hc2guaGl0WCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gKChzbWFzaC54ICsgc21hc2guZHgpIDwgc21hc2guYmFsbFJhZGl1cykgfHwgKChzbWFzaC54ICsgc21hc2guZHgpID4gKHNtYXNoLmNhbnZhcy53aWR0aCAtIHNtYXNoLmJhbGxSYWRpdXMpKTtcbn07XG5cbnNtYXNoLmhpdFRoZVJvb2YgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIChzbWFzaC55ICsgc21hc2guZHkpIDwgc21hc2guYmFsbFJhZGl1cztcbn07XG5zbWFzaC5oaXRUaGVGbG9vciA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gKHNtYXNoLnkgKyBzbWFzaC5keSkgPiAoc21hc2guY2FudmFzLmhlaWdodCAtIHNtYXNoLmJhbGxSYWRpdXMpO1xufTtcblxuc21hc2gub3ZlclBhZGRsZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gKHNtYXNoLnggPiBzbWFzaC5wYWRkbGVYKSAmJiAoc21hc2gueCA8IChzbWFzaC5wYWRkbGVYICsgc21hc2gucGFkZGxlV2lkdGgpKTtcbn07XG5zbWFzaC5oaXRQYWRkbGUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHNtYXNoLm92ZXJQYWRkbGUoKSAmJiBzbWFzaC5oaXRUaGVGbG9vcigpO1xufTtcblxuLy8gTU9WRSBCQUNLIEFORCBGT1JUSFxuJChkb2N1bWVudCkub24oJ2tleWRvd24nLCBmdW5jdGlvbihlKSB7XG4gIGlmIChlLmtleUNvZGUgPT09IDM3KSB7XG4gICAgc21hc2gubGVmdEtleSA9IHRydWU7XG4gICAgc21hc2gucGxheVNvdW5kKCdoaS1wZXJjLTUnKTtcbiAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT09IDM5KSB7XG4gICAgc21hc2gucmlnaHRLZXkgPSB0cnVlO1xuICAgIHNtYXNoLnBsYXlTb3VuZCgnaGktcGVyYy03Jyk7XG4gIH07XG59KTtcbiQoZG9jdW1lbnQpLm9uKCdrZXl1cCcsIGZ1bmN0aW9uKGUpIHtcbiAgaWYgKGUua2V5Q29kZSA9PT0gMzcpIHtcbiAgICBzbWFzaC5sZWZ0S2V5ID0gZmFsc2U7XG4gIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09PSAzOSkge1xuICAgIHNtYXNoLnJpZ2h0S2V5ID0gZmFsc2U7XG4gIH07XG59KTtcblxuc21hc2gubWFyZ2luTGVmdCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gc21hc2gucGFkZGxlWCA+IDA7XG59O1xuc21hc2gubWFyZ2luUmlnaHQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHNtYXNoLnBhZGRsZVggPCAoc21hc2guY2FudmFzLndpZHRoIC0gc21hc2gucGFkZGxlV2lkdGgpO1xufTtcblxuc21hc2gubW92ZUxlZnQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHNtYXNoLnBhZGRsZVggLT0gNztcbn07XG5zbWFzaC5tb3ZlUmlnaHQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHNtYXNoLnBhZGRsZVggKz0gNztcbn07XG5cbi8vIEJSSUNLIElUXG5zbWFzaC5icmlja1Jvd3MgPSA1O1xuc21hc2guYnJpY2tDb2x1bW5zID0gMztcbnNtYXNoLmJyaWNrV2lkdGggPSA3NTtcbnNtYXNoLmJyaWNrSGVpZ2h0ID0gMjA7XG5zbWFzaC5icmlja1BhZGRpbmcgPSAxMDtcbnNtYXNoLmJyaWNrT2Zmc2V0VG9wID0gMzA7XG5zbWFzaC5icmlja09mZnNldExlZnQgPSAzMDtcblxuc21hc2guYnJpY2tzID0gW107XG5cbnNtYXNoLmJyaWNrTGF5ZXIgPSBmdW5jdGlvbigpIHtcbiAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgc21hc2guYnJpY2tDb2x1bW5zOyBjb2wrKykge1xuICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IHNtYXNoLmJyaWNrUm93czsgcm93KyspIHtcbiAgICAgIHNtYXNoLmJyaWNrcy5wdXNoKHtcbiAgICAgICAgeCA6IChyb3cgKiAoc21hc2guYnJpY2tXaWR0aCArIHNtYXNoLmJyaWNrUGFkZGluZykpICsgc21hc2guYnJpY2tPZmZzZXRMZWZ0LFxuICAgICAgICB5IDogKGNvbCAqIChzbWFzaC5icmlja0hlaWdodCArIHNtYXNoLmJyaWNrUGFkZGluZykpICsgc21hc2guYnJpY2tPZmZzZXRUb3AsXG4gICAgICAgIHN0YXR1cyA6IDFcbiAgICAgIH0pO1xuICAgIH07XG4gIH07XG59O1xuXG5zbWFzaC5kcmF3QnJpY2tzID0gZnVuY3Rpb24oKSB7XG4gIHNtYXNoLmJyaWNrcy5mb3JFYWNoKGZ1bmN0aW9uKGJyaWNrKSB7XG4gICAgaWYgKCFicmljay5zdGF0dXMpIHJldHVybjtcblxuICAgIHNtYXNoLmNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgc21hc2guY29udGV4dC5yZWN0KGJyaWNrLngsIGJyaWNrLnksIHNtYXNoLmJyaWNrV2lkdGgsIHNtYXNoLmJyaWNrSGVpZ2h0KTtcbiAgICBzbWFzaC5jb250ZXh0LmZpbGxTdHlsZSA9ICd3aGl0ZSc7XG4gICAgc21hc2guY29udGV4dC5maWxsKCk7XG4gICAgc21hc2guY29udGV4dC5jbG9zZVBhdGgoKTtcbiAgfSk7XG59O1xuXG4vLyBTRVRUTEUgVEhFIFNDT1JFXG5zbWFzaC5zY29yZSA9IDA7XG5cbnNtYXNoLmRyYXdTY29yZSA9IGZ1bmN0aW9uKCkge1xuICBzbWFzaC5jb250ZXh0LmZvbnQgPSAnMTZweCBtb25vc3BhY2UnO1xuICBzbWFzaC5jb250ZXh0LmZpbGxTdHlsZSA9ICd3aGl0ZSc7XG4gIHNtYXNoLmNvbnRleHQuZmlsbFRleHQoJ3Njb3JlOiAnICsgc21hc2guc2NvcmUsIDEwLCAyMCk7XG59XG5cbi8vIFlPTE9cbnNtYXNoLmxpdmVzID0gMztcblxuc21hc2guZHJhd0xpdmVzID0gZnVuY3Rpb24oKSB7XG4gIHNtYXNoLmNvbnRleHQuZm9udCA9ICcxNnB4IG1vbm9zcGFjZSc7XG4gIHNtYXNoLmNvbnRleHQuZmlsbFN0eWxlID0gJ3doaXRlJztcbiAgc21hc2guY29udGV4dC5maWxsVGV4dCgnbGl2ZXM6ICcgKyBzbWFzaC5saXZlcywgKHNtYXNoLmNhbnZhcy53aWR0aCAtIDkwKSwgMjApO1xufVxuXG4vLyBCUkVBSyBTVFVGRiwgV0lOIFBSSVpFU1xuc21hc2guY3Jhc2ggPSBmdW5jdGlvbigpIHtcbiAgc21hc2guYnJpY2tzLmZvckVhY2goZnVuY3Rpb24oYnJpY2spIHtcbiAgICBpZiAoIWJyaWNrLnN0YXR1cykgcmV0dXJuO1xuXG4gICAgc21hc2guYnJpY2tFeGlzdHMgPSAoKFxuICAgICAgICAoc21hc2gueCA+IGJyaWNrLngpICYmXG4gICAgICAgIChzbWFzaC54IDwgKGJyaWNrLnggKyBzbWFzaC5icmlja1dpZHRoKSlcbiAgICAgICkgJiYgKFxuICAgICAgICAoc21hc2gueSA+IGJyaWNrLnkpICYmXG4gICAgICAgIChzbWFzaC55IDwgKGJyaWNrLnkgKyBzbWFzaC5icmlja0hlaWdodCkpXG4gICAgICApKTtcblxuICAgIGlmIChzbWFzaC5icmlja0V4aXN0cykge1xuICAgICAgc21hc2gucmV2ZXJzZVkoKTtcbiAgICAgIHNtYXNoLnBsYXlTb3VuZCgnbWlkLXBlcmMtOScpO1xuXG4gICAgICBicmljay5zdGF0dXMgPSAwO1xuICAgICAgc21hc2guc2NvcmUrKztcblxuICAgICAgaWYgKHNtYXNoLnNjb3JlID09PSBzbWFzaC5icmlja1Jvd3MgKiBzbWFzaC5icmlja0NvbHVtbnMpIHtcbiAgICAgICAgc21hc2gucGxheVNvdW5kKCdsb29wLTMnKTtcbiAgICAgICAgJCgnI2FsZXJ0JykudGV4dCgnV0lOJyk7XG5cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICBkb2N1bWVudC5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgfSwgMTAwMCk7XG4gICAgICB9O1xuICAgIH07XG4gIH0pO1xufTtcblxuc21hc2gucGxheVNvdW5kID0gZnVuY3Rpb24oc291bmQpIHtcbiAgc21hc2guc291bmQgPSAkKGBhdWRpb1tpZD1cIiR7c291bmR9XCJdYCk7XG4gIHNtYXNoLnNvdW5kWzBdLmN1cnJlbnRUaW1lID0gMDtcbiAgc21hc2guc291bmRbMF0ucGxheSgpO1xufTtcblxuLy8gQUNUSU9OIVxuc21hc2guZHJhdyA9IGZ1bmN0aW9uKCkge1xuXG4gIC8vIENMRUFSIENBTlZBU1xuICBzbWFzaC5jb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBzbWFzaC5jYW52YXMud2lkdGgsIHNtYXNoLmNhbnZhcy5oZWlnaHQpO1xuXG4gIC8vIERSQVcgSVQgT1VUXG4gIHNtYXNoLmRyYXdCcmlja3MoKTtcbiAgc21hc2guZHJhd0JhbGwoKTtcbiAgc21hc2guZHJhd1BhZGRsZSgpO1xuICBzbWFzaC5kcmF3TGl2ZXMoKTtcbiAgc21hc2guZHJhd1Njb3JlKCk7XG4gIHNtYXNoLmNyYXNoKCk7XG5cbiAgLy8gV0FMTEJBTExcbiAgaWYgKHNtYXNoLmhpdFgoKSkge1xuICAgIHNtYXNoLnJldmVyc2VYKCk7XG4gICAgc21hc2gucGxheVNvdW5kKCdoaS1wZXJjLTInKTtcbiAgfTtcbiAgaWYgKHNtYXNoLmhpdFBhZGRsZSgpKSB7XG4gICAgc21hc2gucmV2ZXJzZVkoKTtcbiAgICBzbWFzaC5wbGF5U291bmQoJ2tpY2stNScpO1xuICB9O1xuICBpZiAoc21hc2guaGl0VGhlUm9vZigpKSB7XG4gICAgc21hc2gucmV2ZXJzZVkoKTtcbiAgICBzbWFzaC5wbGF5U291bmQoJ2hpLXBlcmMtMicpO1xuICB9IGVsc2UgaWYgKHNtYXNoLmhpdFRoZUZsb29yKCkpIHtcbiAgICBzbWFzaC5wbGF5U291bmQoJ21pZC1wZXJjLTgnKTtcbiAgICBzbWFzaC5saXZlcy0tO1xuICAgIGlmICghc21hc2gubGl2ZXMpIHtcbiAgICAgIHNtYXNoLmxpdmVzID0gJ/CfkoAnO1xuXG4gICAgICAkKCcjYWxlcnQnKS50ZXh0KCdsb3NlJyk7XG5cbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIGRvY3VtZW50LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgfSwgMTAwMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNtYXNoLmRlZmF1bHQoKTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIEVMRUNUUklDIFNMSURFXG4gIGlmIChzbWFzaC5sZWZ0S2V5ICYmIHNtYXNoLm1hcmdpbkxlZnQoKSkge1xuICAgIHNtYXNoLm1vdmVMZWZ0KCk7XG4gIH07XG4gIGlmIChzbWFzaC5yaWdodEtleSAmJiBzbWFzaC5tYXJnaW5SaWdodCgpKSB7XG4gICAgc21hc2gubW92ZVJpZ2h0KCk7XG4gIH07XG5cbiAgLy8gUE9TSVRJT04gKz0gTkVXIFBPU0lUSU9OXG4gIHNtYXNoLnggKz0gc21hc2guZHg7XG4gIHNtYXNoLnkgKz0gc21hc2guZHk7XG5cbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNtYXNoLmRyYXcpO1xufTtcblxuLy8gSU5JVFxuc21hc2guaW5pdCA9IGZ1bmN0aW9uKCkge1xuICBzbWFzaC5icmlja0xheWVyKCk7XG4gIHNtYXNoLmRlZmF1bHQoKTtcbiAgc21hc2guZHJhdygpO1xufTtcblxuLy8gRE9DUkVBRFlcbiQoc21hc2guaW5pdCk7XG4iXX0=
